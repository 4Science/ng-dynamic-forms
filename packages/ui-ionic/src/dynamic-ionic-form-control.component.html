<div [formGroup]="group" [ngClass]="[getClass('element', 'container'), getClass('grid', 'container')]">

    <ng-container *ngTemplateOutlet="templates[0]?.templateRef; context: model"></ng-container>

    <!-- FORM ARRAY --------------------------------------------------------------------------------------------------->
    <div *ngIf="isFormArray"
         [dynamicId]="bindId && model.id"
         [formArrayName]="model.id"
         [ngClass]="getClass('element', 'control')">

        <div *ngFor="let groupModel of model.groups; let idx = index" role="group"
             [formGroupName]="idx" [ngClass]="[getClass('element', 'group'), getClass('grid', 'group')]">

            <dynamic-ionic-form-control *ngFor="let _model of groupModel.group"
                                        [bindId]="false"
                                        [context]="groupModel"
                                        [group]="control.at(idx)"
                                        [hidden]="_model.hidden"
                                        [layout]="layout"
                                        [model]="_model"
                                        [templates]="templateList"
                                        [ngClass]="[getClass('element', 'host', _model), getClass('grid', 'host', _model)]"
                                        (blur)="onBlur($event)"
                                        (change)="onChange($event)"
                                        (focus)="onFocus($event)"
                                        (ionEvent)="onCustomEvent($event)"></dynamic-ionic-form-control>

            <ng-container *ngTemplateOutlet="templates[2]?.templateRef; context: groupModel"></ng-container>

        </div>

    </div>

    <!-- FORM GROUP --------------------------------------------------------------------------------------------------->
    <fieldset *ngIf="isFormGroup"
              [dynamicId]="bindId && model.id"
              [formGroupName]="model.id"
              [name]="model.name"
              [ngClass]="getClass('element', 'control')">

        <legend *ngIf="model.legend" [innerHTML]="model.legend"></legend>

        <dynamic-ionic-form-control *ngFor="let _model of model.group"
                                    [group]="control"
                                    [hidden]="_model.hidden"
                                    [layout]="layout"
                                    [model]="_model"
                                    [templates]="templateList"
                                    [ngClass]="[getClass('element', 'host', _model), getClass('grid', 'host', _model)]"
                                    (blur)="onBlur($event)"
                                    (change)="onChange($event)"
                                    (focus)="onFocus($event)"
                                    (ionEvent)="onCustomEvent($event)"></dynamic-ionic-form-control>
    </fieldset>

    <!-- RADIO GROUP -------------------------------------------------------------------------------------------------->
    <ion-list *ngIf="isRadioGroup" radio-group
              [dynamicId]="bindId && model.id"
              [formControlName]="model.id"
              [ngClass]="getClass('element', 'control')"
              (ionChange)="onChange($event)">

        <ion-list-header *ngIf="model.label !== null">{{ model.label }}</ion-list-header>

        <ion-item *ngFor="let option of model.options$ | async" [ngClass]="getClass('element', 'option')">

            <ion-label>{{ option.label }}</ion-label>
            <ion-radio [value]="option.value"></ion-radio>

        </ion-item>

    </ion-list>


    <ion-item *ngIf="type !== 1 && type !== 4 && type !== 6">

        <ion-label *ngIf="model.label !== null"
                   [innerHTML]="model.label"
                   [ngClass]="[getClass('element', 'label'), getClass('grid', 'label')]"></ion-label>

        <ng-container #componentViewContainer></ng-container>

    </ion-item>

    <ng-container *ngTemplateOutlet="templates[1]?.templateRef; context: model"></ng-container>

    <ng-content></ng-content>

</div>